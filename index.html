<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LEGO City Learning ‚Äì Petr‚Äôs Missions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root {
      --bg: #fffbef;
      --primary: #2563eb;
      --primary-soft: #dbeafe;
      --accent: #f97316;
      --accent-soft: #ffedd5;
      --card-bg: #ffffff;
      --text-main: #111827;
      --text-soft: #6b7280;
      --radius-lg: 1.3rem;
      --radius-md: 1rem;
    }

    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #fef3c7 0, #fffbef 45%, #eff6ff 100%);
      color: var(--text-main);
      font-size: 16px;
    }

    header {
      padding: 1rem 1.2rem;
      background: linear-gradient(90deg, #0ea5e9, #6366f1);
      color: white;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 0.75rem;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.25);
      position: sticky;
      top: 0;
      z-index: 10;
    }

    header h1 {
      margin: 0;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    header h1 span {
      font-size: 2rem;
    }

    header small {
      display: block;
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .top-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }

    label {
      font-size: 0.78rem;
      color: #e5e7eb;
    }

    input[type="text"],
    select {
      border-radius: 999px;
      border: 2px solid rgba(255, 255, 255, 0.7);
      padding: 0.35rem 0.7rem;
      font-size: 0.85rem;
      background: rgba(255, 255, 255, 0.95);
      min-width: 0;
      color: #111827;
    }

    main {
      max-width: 1180px;
      margin: 0 auto 2rem;
      padding: 1rem 0.8rem;
    }

    /* HERO */

    .hero {
      margin-top: 0.4rem;
      margin-bottom: 1rem;
      display: grid;
      grid-template-columns: minmax(0, 1.7fr) minmax(0, 1.1fr);
      gap: 0.9rem;
    }

    @media (max-width: 900px) {
      .hero {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: var(--card-bg);
      border-radius: var(--radius-lg);
      padding: 1rem;
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.1);
      position: relative;
      overflow: hidden;
    }

    .hero-main-title {
      font-size: 1.3rem;
      font-weight: 800;
      margin-bottom: 0.3rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .hero-main-title span {
      font-size: 1.5rem;
    }

    .hero-pill {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      font-size: 0.75rem;
      padding: 0.15rem 0.7rem;
      border-radius: 999px;
      background: #fef3c7;
      border: 1px solid #facc15;
      color: #92400e;
      margin-bottom: 0.4rem;
    }

    .hero-text {
      font-size: 0.9rem;
      color: #374151;
      margin-bottom: 0.6rem;
    }

    .hero-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      align-items: center;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 0.55rem 1.1rem;
      font-size: 0.9rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.35rem;
      text-decoration: none;
      transition: transform 0.1s ease-out, box-shadow 0.1s ease-out;
    }

    .btn-primary {
      background: var(--accent);
      color: white;
      box-shadow: 0 6px 0 #ea580c;
    }

    .btn-primary:active {
      transform: translateY(2px);
      box-shadow: 0 3px 0 #ea580c;
    }

    .btn-soft {
      background: rgba(255, 255, 255, 0.9);
      border: 2px dashed #fde68a;
      color: #92400e;
    }

    .lego-city {
      display: grid;
      gap: 0.35rem;
      margin-top: 0.6rem;
    }

    .lego-row {
      display: flex;
      gap: 0.3rem;
    }

    .brick {
      flex: 1;
      height: 28px;
      border-radius: 0.5rem;
      position: relative;
      box-shadow: 0 3px 0 rgba(15, 23, 42, 0.25);
      animation: floatBrick 4s ease-in-out infinite;
    }

    .lego-row:nth-child(2) .brick {
      animation-delay: 0.6s;
    }

    .brick::before {
      content: "";
      position: absolute;
      top: -8px;
      left: 6px;
      width: 16px;
      height: 8px;
      border-radius: 0.5rem 0.5rem 0.1rem 0.1rem;
      background: rgba(255, 255, 255, 0.5);
    }

    .brick.red { background: #f97373; }
    .brick.blue { background: #3b82f6; }
    .brick.yellow { background: #facc15; }
    .brick.green { background: #22c55e; }

    @keyframes floatBrick {
      0%, 100% { transform: translateY(0); }
      50% { transform: translateY(-4px); }
    }

    .robot-bubble {
      background: #111827;
      color: white;
      border-radius: 1.3rem;
      padding: 0.8rem 1rem;
      font-size: 0.9rem;
      margin-bottom: 0.4rem;
      max-width: 280px;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.35);
    }

    .robot-face {
      font-size: 3.8rem;
      text-align: center;
      animation: robotWave 2.5s ease-in-out infinite;
    }

    @keyframes robotWave {
      0%, 100% { transform: translateY(0) rotate(0deg); }
      50% { transform: translateY(-3px) rotate(-4deg); }
    }

    /* PHRASES */

    h2.section-title {
      font-size: 1.1rem;
      margin: 0 0 0.3rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
    }

    .badge {
      font-size: 0.8rem;
      padding: 0.2rem 0.6rem;
      border-radius: 999px;
      background: var(--primary-soft);
      color: var(--primary);
      border: 1px solid #bfdbfe;
      white-space: nowrap;
    }

    .small-text {
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .phrases-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(240px, 1fr));
      gap: 0.6rem;
      margin-top: 0.4rem;
    }

    .phrase-card {
      border-radius: var(--radius-md);
      padding: 0.6rem 0.7rem;
      background: #eff6ff;
      border: 1px solid #bfdbfe;
      font-size: 0.85rem;
      display: flex;
      flex-direction: column;
      gap: 0.2rem;
    }

    .phrase-header {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 0.4rem;
    }

    .phrase-text-main {
      font-weight: 600;
    }

    .phrase-translation {
      font-size: 0.78rem;
      color: #4b5563;
    }

    .phrase-tip {
      font-size: 0.75rem;
      color: #6b7280;
    }

    .btn-circle {
      border-radius: 999px;
      padding: 0.3rem 0.7rem;
      border: none;
      background: var(--primary);
      color: white;
      font-size: 0.8rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      box-shadow: 0 3px 0 #1d4ed8;
    }

    .btn-circle:active {
      transform: translateY(1px);
      box-shadow: 0 1px 0 #1d4ed8;
    }

    /* LAYOUT */

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 2.4fr) minmax(0, 1.6fr);
      gap: 1rem;
      margin-top: 0.8rem;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    .controls-row {
      display: flex;
      flex-wrap: wrap;
      gap: 0.5rem;
      margin-bottom: 0.6rem;
      align-items: center;
      font-size: 0.8rem;
      color: var(--text-soft);
    }

    .quest-track {
      display: flex;
      flex-wrap: wrap;
      gap: 0.3rem;
    }

    .quest-dot {
      width: 26px;
      height: 26px;
      border-radius: 999px;
      background: #e5e7eb;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 0.75rem;
      color: #4b5563;
      position: relative;
    }

    .quest-dot.completed {
      background: #22c55e;
      color: white;
    }

    .quest-dot.completed::after {
      content: "‚òÖ";
      position: absolute;
      top: -7px;
      right: -4px;
      font-size: 0.65rem;
      color: #facc15;
    }

    .missions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(260px, 1fr));
      gap: 0.8rem;
    }

    .mission-card {
      border-radius: var(--radius-lg);
      border: 2px solid #e5e7eb;
      padding: 0.8rem 0.8rem 0.7rem;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      gap: 0.3rem;
      position: relative;
      overflow: hidden;
      transition: transform 0.12s ease-out, box-shadow 0.12s ease-out;
    }

    .mission-card:hover {
      transform: translateY(-2px);
      box-shadow: 0 10px 18px rgba(15, 23, 42, 0.15);
    }

    .mission-icon {
      width: 34px;
      height: 34px;
      border-radius: 999px;
      background: white;
      display: flex;
      align-items: center;
      justify-content: center;
      font-size: 1.2rem;
      box-shadow: 0 3px 0 rgba(148, 163, 184, 0.5);
    }

    .mission-header-row {
      display: flex;
      align-items: center;
      gap: 0.55rem;
    }

    .mission-domain {
      font-size: 0.8rem;
      text-transform: uppercase;
      letter-spacing: 0.05em;
      color: #6b7280;
    }

    .mission-title {
      font-size: 0.95rem;
      font-weight: 700;
      color: #111827;
    }

    .mission-desc {
      font-size: 0.82rem;
      color: #4b5563;
    }

    .mission-actions {
      display: flex;
      flex-wrap: wrap;
      gap: 0.35rem;
      margin-top: 0.2rem;
    }

    .mission-status {
      margin-top: 0.3rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      font-size: 0.8rem;
      color: #374151;
    }

    .mission-status label {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      cursor: pointer;
    }

    .mission-status input[type="checkbox"] {
      transform: scale(1.1);
      cursor: pointer;
    }

    .quest-btn {
      background: var(--primary-soft);
      color: var(--primary);
      border-radius: 999px;
      border: none;
      padding: 0.4rem 0.75rem;
      font-size: 0.8rem;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      cursor: pointer;
    }

    .quest-btn span {
      font-size: 0.95rem;
    }

    details {
      margin-top: 0.3rem;
      font-size: 0.8rem;
      background: #eef2ff;
      border-radius: 0.8rem;
      padding: 0.4rem 0.5rem;
    }

    details summary {
      cursor: pointer;
      color: #4f46e5;
      list-style: none;
    }

    details summary::marker,
    details summary::-webkit-details-marker {
      display: none;
    }

    details summary::before {
      content: "‚ñ∂";
      font-size: 0.7rem;
      margin-right: 0.3rem;
      display: inline-block;
      transform: translateY(-1px);
    }

    details[open] summary::before {
      content: "‚ñº";
    }

    .dialog-text {
      margin-top: 0.3rem;
      color: #374151;
    }

    .dialog-text strong {
      color: #111827;
    }

    /* QUIZ */

    .quiz-block {
      margin-top: 0.3rem;
      padding-top: 0.3rem;
      border-top: 1px dashed #c7d2fe;
    }

    .quiz-question {
      font-size: 0.85rem;
      font-weight: 600;
      margin-bottom: 0.25rem;
    }

    .quiz-options {
      display: flex;
      flex-wrap: wrap;
      gap: 0.3rem;
    }

    .quiz-option-btn {
      border-radius: 999px;
      border: none;
      padding: 0.3rem 0.8rem;
      font-size: 0.78rem;
      cursor: pointer;
      background: white;
      border: 1px solid #cbd5f5;
    }

    .quiz-option-btn.correct {
      background: #bbf7d0;
      border-color: #22c55e;
    }

    .quiz-option-btn.wrong {
      background: #fee2e2;
      border-color: #ef4444;
    }

    .quiz-feedback {
      font-size: 0.78rem;
      margin-top: 0.2rem;
      min-height: 1rem;
    }

    .quiz-feedback.ok {
      color: #15803d;
    }

    .quiz-feedback.bad {
      color: #b91c1c;
    }

    /* PROGRESS & NOTES */

    .progress-card {
      display: flex;
      flex-direction: column;
      gap: 0.8rem;
    }

    .progress-bar-wrapper {
      width: 100%;
      height: 12px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #16a34a);
      transition: width 0.2s ease-out;
    }

    textarea {
      width: 100%;
      resize: vertical;
      border-radius: var(--radius-md);
      border: 1px solid #d1d5db;
      padding: 0.55rem 0.7rem;
      font-size: 0.85rem;
      min-height: 120px;
    }

    .footer-note {
      text-align: center;
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 1.1rem;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
<header>
  <div>
    <h1><span>üß±</span> LEGO City Learning</h1>
    <small>Four weeks of city quests for Petr ‚Äì 7 skills a day</small>
  </div>
  <div class="top-controls">
    <label>
      Child:
      <input type="text" id="childName" placeholder="Petr" />
    </label>
    <label>
      Week:
      <select id="weekSelect">
        <option value="week1">Week 1 ‚Äì City Heroes</option>
        <option value="week2">Week 2 ‚Äì City Vehicles</option>
        <option value="week3">Week 3 ‚Äì City Jobs</option>
        <option value="week4">Week 4 ‚Äì City Adventures</option>
      </select>
    </label>
    <label>
      Day:
      <select id="daySelect">
        <option value="sat">Saturday</option>
        <option value="sun">Sunday</option>
        <option value="mon">Monday</option>
        <option value="tue">Tuesday</option>
        <option value="wed">Wednesday</option>
      </select>
    </label>
  </div>
</header>

<main>
  <!-- HERO -->
  <section class="hero">
    <div class="card">
      <div class="hero-main-title"><span>üèôÔ∏è</span>LEGO City skills lab</div>
      <div class="hero-pill">7 short LEGO quests ¬∑ English ¬∑ Slovene ¬∑ Maths ¬∑ Creativity</div>
      <p class="hero-text">
        Every quest trains one skill: English speaking, social confidence, fine motor skills, maths,
        Slovene, creativity and understanding the world. Choose a week and a day, then press
        <strong>‚ÄúStart today‚Äôs quests‚Äù</strong>.
      </p>
      <div class="hero-actions">
        <button class="btn btn-primary" id="startQuestsBtn">
          <span>‚ñ∂</span> Start today‚Äôs quests
        </button>
        <button class="btn btn-soft" id="scrollToPhrasesBtn">
          üéß New phrases today
        </button>
      </div>
      <div class="lego-city" aria-hidden="true">
        <div class="lego-row">
          <div class="brick red"></div>
          <div class="brick blue"></div>
          <div class="brick yellow"></div>
          <div class="brick green"></div>
        </div>
        <div class="lego-row">
          <div class="brick blue"></div>
          <div class="brick yellow"></div>
          <div class="brick red"></div>
          <div class="brick green"></div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="robot-bubble">
        Hi! I am your LEGO City robot. Each card is a quest. Click
        <strong>‚ÄúOpen PDF‚Äù</strong> to print the worksheet, then <strong>‚ÄúStart quest‚Äù</strong>
        for a mini-game or test. Use the audio phrases while playing.
      </div>
      <div class="robot-face">ü§ñ</div>
    </div>
  </section>

  <!-- PHRASES -->
  <section class="card" id="phrasesSection">
    <h2 class="section-title">
      New phrases for this week
      <span class="badge" id="phrasesWeekLabel">Week 1 ‚Äì City Heroes</span>
    </h2>
    <p class="small-text">
      Play the audio (after you upload mp3 files to the <code>audio/</code> folder) and repeat with Petr.
      Use English phrases in English quests and Slovene phrases during Slovene time.
    </p>
    <div class="phrases-grid" id="englishPhrases"></div>
    <div class="phrases-grid" id="slovenePhrases"></div>
  </section>

  <!-- MAIN LAYOUT -->
  <section class="layout" id="questsSection">
    <!-- MISSIONS -->
    <section class="card">
      <h2 class="section-title">
        Today‚Äôs LEGO City quests
        <span class="badge" id="dayLabel"></span>
      </h2>
      <div class="controls-row">
        <span>7 quests = 7 skills.</span>
        <div class="quest-track" id="questDots"></div>
      </div>
      <div class="missions-grid" id="missionsGrid"></div>
    </section>

    <!-- PROGRESS + NOTES -->
    <aside class="card progress-card">
      <h2 class="section-title">
        Progress today
        <span class="badge" id="childLabel">Petr</span>
      </h2>
      <div>
        <div style="font-size:0.9rem;">
          Total quests: <strong id="totalMissions">0</strong><br />
          Done by child: <strong id="doneCount">0</strong><br />
          Checked by parent: <strong id="checkedCount">0</strong>
        </div>
        <div class="progress-bar-wrapper">
          <div class="progress-bar" id="progressBar"></div>
        </div>
        <p class="small-text">
          The bar shows how many quests are <strong>checked by parent</strong>. Each checked quest lights up a star dot.
        </p>
      </div>

      <div>
        <label for="notesArea">Parent notes for this day</label>
        <textarea id="notesArea" placeholder="Observations: speaking, social confidence, fine motor skills‚Ä¶"></textarea>
      </div>
    </aside>
  </section>

  <p class="footer-note">
    All data stays in this browser (localStorage). Upload your own PDFs to <code>pdf/</code> and audio files to <code>audio/</code>.
  </p>
</main>

<script>
  (function () {
    const STORAGE_KEY = "legoCityProgram_v2";

    const childNameInput = document.getElementById("childName");
    const weekSelect = document.getElementById("weekSelect");
    const daySelect = document.getElementById("daySelect");
    const startQuestsBtn = document.getElementById("startQuestsBtn");
    const scrollToPhrasesBtn = document.getElementById("scrollToPhrasesBtn");
    const missionsGrid = document.getElementById("missionsGrid");
    const dayLabel = document.getElementById("dayLabel");
    const childLabel = document.getElementById("childLabel");
    const totalMissionsEl = document.getElementById("totalMissions");
    const doneCountEl = document.getElementById("doneCount");
    const checkedCountEl = document.getElementById("checkedCount");
    const progressBarEl = document.getElementById("progressBar");
    const notesArea = document.getElementById("notesArea");
    const phrasesWeekLabel = document.getElementById("phrasesWeekLabel");
    const englishPhrasesEl = document.getElementById("englishPhrases");
    const slovenePhrasesEl = document.getElementById("slovenePhrases");
    const questDots = document.getElementById("questDots");

    const phrasesSection = document.getElementById("phrasesSection");
    const questsSection = document.getElementById("questsSection");

    const DAYS_LABEL = {
      sat: "Saturday",
      sun: "Sunday",
      mon: "Monday",
      tue: "Tuesday",
      wed: "Wednesday"
    };

    const DOMAIN_ICONS = {
      "English Speaking & Listening": "üó£Ô∏è",
      "Social Confidence / Group Interaction": "ü§ù",
      "Fine Motor Skills / Early Writing": "‚úçÔ∏è",
      "Maths (Numbers & Shapes)": "üî¢",
      "Slovene Language": "üá∏üáÆ",
      "Creative Development (Art & Role Play)": "üé®",
      "Understanding the World": "üåç"
    };

    // === PROGRAM DATA (Week1 –ø–æ–¥—Ä–æ–±–Ω–æ; Week2‚Äì4 –∫–æ–ø–∏—Ä—É—é—Ç —Å—Ç—Ä—É–∫—Ç—É—Ä—É) ===
       const PROGRAM = {
      week1: {
        label: "Week 1 ‚Äì City Heroes",
        englishPhrases: [
          {
            id: "w1_en_1",
            text: "What did you build today?",
            translation: "–ß—Ç–æ —Ç—ã —Å–µ–≥–æ–¥–Ω—è –ø–æ—Å—Ç—Ä–æ–∏–ª?",
            tip: "–ü–æ–ø—Ä–æ—Å–∏ –ü–µ—Ç—Ä–∞ –æ—Ç–≤–µ—Ç–∏—Ç—å –ø–æ–ª–Ω—ã–º –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏–µ–º: ‚ÄúI built ‚Ä¶‚Äù."
          },
          {
            id: "w1_en_2",
            text: "Can you tell me the story?",
            translation: "–†–∞—Å—Å–∫–∞–∂–µ—à—å –º–Ω–µ —ç—Ç—É –∏—Å—Ç–æ—Ä–∏—é?",
            tip: "–¢—Ä–µ–Ω–∏—Ä—É–µ–º —Å–≤—è–∑–Ω—ã–π –ø–µ—Ä–µ—Å–∫–∞–∑ –ø–æ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º."
          },
          {
            id: "w1_en_3",
            text: "I can see a big red fire truck.",
            translation: "–Ø –≤–∏–∂—É –±–æ–ª—å—à–æ–π –∫—Ä–∞—Å–Ω—ã–π –ø–æ–∂–∞—Ä–Ω—ã–π –≥—Ä—É–∑–æ–≤–∏–∫.",
            tip: "–ú–æ–¥–µ–ª—å –æ–ø–∏—Å–∞—Ç–µ–ª—å–Ω–æ–≥–æ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è (—Ü–≤–µ—Ç + —Ä–∞–∑–º–µ—Ä + –æ–±—ä–µ–∫—Ç)."
          },
          {
            id: "w1_en_4",
            text: "How does your hero feel?",
            translation: "–ö–∞–∫ —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—Ç —Ç–≤–æ–π –≥–µ—Ä–æ–π?",
            tip: "–ü–æ–º–æ–≥–∞–µ—Ç –≥–æ–≤–æ—Ä–∏—Ç—å –æ–± —ç–º–æ—Ü–∏—è—Ö, –∞ –Ω–µ —Ç–æ–ª—å–∫–æ –æ –¥–µ–π—Å—Ç–≤–∏—è—Ö."
          }
        ],
        slovenePhrases: [
          {
            id: "w1_sl_1",
            text: "Kaj je to?",
            translation: "–ß—Ç–æ —ç—Ç–æ?",
            tip: "–ò—Å–ø–æ–ª—å–∑—É–π —Å –ª—é–±—ã–º –ø—Ä–µ–¥–º–µ—Ç–æ–º –Ω–∞ –∫–∞—Ä—Ç–∏–Ω–∫–µ."
          },
          {
            id: "w1_sl_2",
            text: "To je gasilski avto.",
            translation: "–≠—Ç–æ –ø–æ–∂–∞—Ä–Ω–∞—è –º–∞—à–∏–Ω–∞.",
            tip: "–°–æ–µ–¥–∏–Ω—è–π —Å –∫–∞—Ä—Ç–∏–Ω–∫–æ–π –º–∞—à–∏–Ω LEGO City."
          },
          {
            id: "w1_sl_3",
            text: "Kako se poƒçuti≈°?",
            translation: "–ö–∞–∫ —Ç—ã —Å–µ–±—è —á—É–≤—Å—Ç–≤—É–µ—à—å?",
            tip: "–ú—è–≥–∫–∏–π –∑–∞—Ö–æ–¥ –Ω–∞ —ç–º–æ—Ü–∏–∏ –Ω–∞ —Å–ª–æ–≤–µ–Ω—Å–∫–æ–º."
          },
          {
            id: "w1_sl_4",
            text: "Rad imam LEGO mesto.",
            translation: "–Ø –ª—é–±–ª—é –≥–æ—Ä–æ–¥ LEGO.",
            tip: "–ü—É—Å—Ç—å –ü—ë—Ç—Ä –ø–æ–≤—Ç–æ—Ä—è–µ—Ç, —É–∫–∞–∑—ã–≤–∞—è –Ω–∞ —Å–≤–æ–π –≥–æ—Ä–æ–¥ –∏–∑ –∫—É–±–∏–∫–æ–≤."
          }
        ],
        days: {
          /* ---------- SATURDAY ---------- */
          sat: {
            title: "Start Mission ‚Äì Fire Station Day",
            activities: [
              {
                id: "eng",
                domain: "English Speaking & Listening",
                title: "Fire station story time",
                pdf: "pdf/w1-sat-english-fire-station-story.pdf",
                desc: "–ö–∞—Ä—Ç–∏–Ω–∫–∏ –ø–æ–∂–∞—Ä–Ω–æ–π —Å—Ç–∞–Ω—Ü–∏–∏. –ü—ë—Ç—Ä –æ—Ç–≤–µ—á–∞–µ—Ç –Ω–∞ –≤–æ–ø—Ä–æ—Å—ã –∏ –≥–æ–≤–æ—Ä–∏—Ç –∫–æ—Ä–æ—Ç–∫–∏–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.",
                dialog: [
                  "Parent: Look at the picture. What can you see?",
                  "Child: I can see a fire truck.",
                  "Parent: What is the firefighter doing?",
                  "Child: He is helping people.",
                  "Parent: Can you tell me the story of this fire truck?"
                ],
                quiz: {
                  question: "Which sentence is best?",
                  options: [
                    "Fire truck red.",
                    "I can see a red fire truck.",
                    "Truck red big."
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "social",
                domain: "Social Confidence / Group Interaction",
                title: "Firefighters‚Äô team talk",
                pdf: "pdf/w1-sat-social-fire-team-cards.pdf",
                desc: "–ö–∞—Ä—Ç–æ—á–∫–∏ —Å —Ä–æ–ª—è–º–∏: –∫–æ–º–∞–Ω–¥–∏—Ä, –≤–æ–¥–∏—Ç–µ–ª—å, –ø–æ–º–æ—â–Ω–∏–∫. –†–∞–∑—ã–≥—Ä—ã–≤–∞–µ–º –º–∏–Ω–∏-—Å—Ü–µ–Ω–∫—É.",
                dialog: [
                  "Parent: You are the firefighter, I am the captain.",
                  "Parent: ‚ÄúPetr, can you help me? We need water!‚Äù",
                  "Child: ‚ÄúYes, I can help. I will drive the truck!‚Äù",
                  "Parent: ‚ÄúThank you! You are part of the team.‚Äù"
                ],
                quiz: {
                  question: "What is a good team answer?",
                  options: [
                    "No, I don‚Äôt want.",
                    "Yes, I can help.",
                    "Fire truck!"
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "motor",
                domain: "Fine Motor Skills / Early Writing",
                title: "Follow the hoses",
                pdf: "pdf/w1-sat-motor-fire-hose-lines.pdf",
                desc: "–ü—Ä—è–º—ã–µ, –≤–æ–ª–Ω–∏—Å—Ç—ã–µ –∏ –ø—É–Ω–∫—Ç–∏—Ä–Ω—ã–µ –ª–∏–Ω–∏–∏ ‚Äì —à–ª–∞–Ω–≥–∏ –æ—Ç –º–∞—à–∏–Ω—ã –∫ –æ–≥–Ω—é.",
                dialog: [
                  "Parent: Let‚Äôs help the water reach the fire.",
                  "Parent: Follow the line slowly with your pencil.",
                  "Parent: Great control! The water reached the fire."
                ],
                quiz: {
                  question: "Which line is easiest to start with?",
                  options: ["Spiral line", "Straight line", "Zig-zag mountain"],
                  correctIndex: 1
                }
              },
              {
                id: "maths",
                domain: "Maths (Numbers & Shapes)",
                title: "Count the fire trucks",
                pdf: "pdf/w1-sat-maths-fire-trucks-count.pdf",
                desc: "–°—á–∏—Ç–∞–µ–º –ø–æ–∂–∞—Ä–Ω—ã–µ –º–∞—à–∏–Ω—ã –∏ –∫–æ–ª—ë—Å–∞, –ø–∏—à–µ–º —Ü–∏—Ñ—Ä—ã 1‚Äì10.",
                dialog: [
                  "Parent: How many fire trucks can you see?",
                  "Child: Three.",
                  "Parent: Can you circle number 3?",
                  "Parent: Let‚Äôs count the wheels together."
                ],
                quiz: {
                  question: "If there are 2 trucks and 1 more comes, how many trucks?",
                  options: ["2", "3", "4"],
                  correctIndex: 1
                }
              },
              {
                id: "slovene",
                domain: "Slovene Language",
                title: "Kaj je v gasilski postaji?",
                pdf: "pdf/w1-sat-slovene-fire-station-objects.pdf",
                desc: "–ü–æ–¥–ø–∏—Å–∏ –∫ –∫–∞—Ä—Ç–∏–Ω–∫–∞–º –Ω–∞ —Å–ª–æ–≤–µ–Ω—Å–∫–æ–º: gasilski avto, ƒçelada, voda.",
                dialog: [
                  "Parent: Kaj je to?",
                  "Child: To je gasilski avto.",
                  "Parent: Super! In kaj je to?",
                  "Child: To je ƒçelada."
                ],
                quiz: {
                  question: "Kako reƒçemo 'fire truck' v sloven≈°ƒçini?",
                  options: ["Policijski avto", "Gasilski avto", "Avtobus"],
                  correctIndex: 1
                }
              },
              {
                id: "creative",
                domain: "Creative Development (Art & Role Play)",
                title: "Build a small fire station",
                pdf: "pdf/w1-sat-creative-fire-station-idea-card.pdf",
                desc: "–ò–¥–µ—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏ –∏–∑ LEGO –∏ –ª–∏—Å—Ç –¥–ª—è —Ä–∏—Å—É–Ω–∫–∞ —Å–≤–æ–µ–π —Å—Ç–∞–Ω—Ü–∏–∏.",
                dialog: [
                  "Parent: Let‚Äôs build your own fire station.",
                  "Parent: Where is the garage? Where do people wait?",
                  "Child: Here is the garage, here is the door."
                ],
                quiz: {
                  question: "What can we add to make the station safer?",
                  options: ["A big hole", "A traffic light", "Nothing"],
                  correctIndex: 1
                }
              },
              {
                id: "world",
                domain: "Understanding the World",
                title: "Why do we need firefighters?",
                pdf: "pdf/w1-sat-world-fire-safety-pictures.pdf",
                desc: "–ö–∞—Ä—Ç–∏–Ω–∫–∏: –æ–≥–æ–Ω—å, –¥–æ–º, –ø–æ–∂–∞—Ä–Ω—ã–µ. –û–±—Å—É–∂–¥–∞–µ–º, –∑–∞—á–µ–º –æ–Ω–∏ –Ω—É–∂–Ω—ã.",
                dialog: [
                  "Parent: Why do we need firefighters?",
                  "Child: Because of fire.",
                  "Parent: They help people and keep the city safe."
                ],
                quiz: {
                  question: "When do we call firefighters?",
                  options: [
                    "When we are bored",
                    "When there is a fire",
                    "When we want ice cream"
                  ],
                  correctIndex: 1
                }
              }
            ]
          },

          /* ---------- SUNDAY ---------- */
          sun: {
            title: "Police Day ‚Äì LEGO City Police Station",
            activities: [
              {
                id: "eng",
                domain: "English Speaking & Listening",
                title: "Police car story",
                pdf: "pdf/w1-sun-english-police-story.pdf",
                desc: "–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–æ–∫ —Å –ø–æ–ª–∏—Ü–µ–π—Å–∫–æ–π –º–∞—à–∏–Ω–æ–π. –ü—ë—Ç—Ä –æ–ø–∏—Å—ã–≤–∞–µ—Ç, —á—Ç–æ –ø—Ä–æ–∏—Å—Ö–æ–¥–∏—Ç.",
                dialog: [
                  "Parent: What can you see in picture one?",
                  "Child: I see a police car.",
                  "Parent: What happens next?",
                  "Child: The car is driving fast.",
                  "Parent: Why is the police car in a hurry?"
                ],
                quiz: {
                  question: "Which sentence sounds best?",
                  options: [
                    "Police car fast.",
                    "The police car is fast.",
                    "Fast car police."
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "social",
                domain: "Social Confidence / Group Interaction",
                title: "Police & citizen role play",
                pdf: "pdf/w1-sun-social-police-dialogue-cards.pdf",
                desc: "–ö–∞—Ä—Ç–æ—á–∫–∏ —Ä–æ–ª–µ–π: –ø–æ–ª–∏—Ü–µ–π—Å–∫–∏–π, –ø–æ—Ç–µ—Ä—è–≤—à–∏–π—Å—è —Ä–µ–±—ë–Ω–æ–∫. –û—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–µ–∂–ª–∏–≤—ã–µ —Ñ—Ä–∞–∑—ã.",
                dialog: [
                  "Parent (police): ‚ÄúHello! How can I help you?‚Äù",
                  "Child (citizen): ‚ÄúI can‚Äôt find my mum.‚Äù",
                  "Parent: ‚ÄúDon‚Äôt worry, I will help you. What‚Äôs your name?‚Äù",
                  "Child: ‚ÄúMy name is Petr.‚Äù"
                ],
                quiz: {
                  question: "What is a polite start for the police officer?",
                  options: [
                    "‚ÄúWhat do you want?‚Äù",
                    "‚ÄúHello! How can I help you?‚Äù",
                    "‚ÄúGo away.‚Äù"
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "motor",
                domain: "Fine Motor Skills / Early Writing",
                title: "Follow the city roads",
                pdf: "pdf/w1-sun-motor-city-road-lines.pdf",
                desc: "–û–±–≤–æ–¥–∏–º –¥–æ—Ä–æ–≥–∏, –Ω–µ –≤—ã—Ö–æ–¥—è –∑–∞ –ª–∏–Ω–∏–∏; –¥–æ—Ä–∏—Å–æ–≤—ã–≤–∞–µ–º –Ω–µ–¥–æ—Å—Ç–∞—é—â–∏–µ —É—á–∞—Å—Ç–∫–∏.",
                dialog: [
                  "Parent: Can you drive the pencil car along the road?",
                  "Parent: Try to stay inside the line.",
                  "Parent: Now make a small turn."
                ],
                quiz: {
                  question: "Where should the pencil-car go?",
                  options: [
                    "On the road line",
                    "Outside the page",
                    "Through the houses"
                  ],
                  correctIndex: 0
                }
              },
              {
                id: "maths",
                domain: "Maths (Numbers & Shapes)",
                title: "Shape badges",
                pdf: "pdf/w1-sun-maths-police-shapes.pdf",
                desc: "–ó–≤–µ–∑–¥–∞, –∫—Ä—É–≥, –ø—Ä—è–º–æ—É–≥–æ–ª—å–Ω–∏–∫ ‚Äì –∑–Ω–∞—á–∫–∏ –∏ –∑–Ω–∞–∫–∏. –ù–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—ã.",
                dialog: [
                  "Parent: What shape is the badge?",
                  "Child: A star.",
                  "Parent: Can you find a circle sign?",
                  "Child: Here!"
                ],
                quiz: {
                  question: "Which is a star?",
                  options: ["‚≠ê", "‚¨õ", "‚ö™"],
                  correctIndex: 0
                }
              },
              {
                id: "slovene",
                domain: "Slovene Language",
                title: "Na policijski postaji",
                pdf: "pdf/w1-sun-slovene-police-station.pdf",
                desc: "–ü–æ–¥–ø–∏—Å–∏ –∏ –ø—Ä–æ—Å—Ç—ã–µ —Ñ—Ä–∞–∑—ã: policist, avto, postaja.",
                dialog: [
                  "Parent: Kaj je to?",
                  "Child: To je policist.",
                  "Parent: Kje je policijski avto?",
                  "Child: Tukaj.",
                  "Parent: To je policijska postaja."
                ],
                quiz: {
                  question: "Kaj pomeni ‚Äòpolicist‚Äô?",
                  options: ["–î–æ–∫—Ç–æ—Ä", "–ü–æ–ª–∏—Ü–µ–π—Å–∫–∏–π", "–ü–æ–∂–∞—Ä–Ω—ã–π"],
                  correctIndex: 1
                }
              },
              {
                id: "creative",
                domain: "Creative Development (Art & Role Play)",
                title: "Design a police badge",
                pdf: "pdf/w1-sun-creative-badge-template.pdf",
                desc: "–ö–æ–Ω—Ç—É—Ä –∑–Ω–∞—á–∫–∞ –¥–ª—è —Ä–∞—Å–∫—Ä–∞—à–∏–≤–∞–Ω–∏—è, —Ä–µ–±—ë–Ω–æ–∫ –¥–æ–±–∞–≤–ª—è–µ—Ç —Å–∏–º–≤–æ–ª—ã.",
                dialog: [
                  "Parent: Let‚Äôs design your own badge.",
                  "Parent: What colours will you use?",
                  "Child: Blue and yellow."
                ],
                quiz: {
                  question: "What can be on a police badge?",
                  options: ["Stars or shields", "Food", "Random scribbles only"],
                  correctIndex: 0
                }
              },
              {
                id: "world",
                domain: "Understanding the World",
                title: "Safe and unsafe situations",
                pdf: "pdf/w1-sun-world-safe-unsafe-pictures.pdf",
                desc: "–ö–∞—Ä—Ç–∏–Ω–∫–∏ –±–µ–∑–æ–ø–∞—Å–Ω–æ–≥–æ/–æ–ø–∞—Å–Ω–æ–≥–æ –ø–æ–≤–µ–¥–µ–Ω–∏—è –≤ –≥–æ—Ä–æ–¥–µ, –æ–±–≤–æ–¥–∏–º –±–µ–∑–æ–ø–∞—Å–Ω—ã–µ.",
                dialog: [
                  "Parent: Is this safe or not safe?",
                  "Child: Not safe.",
                  "Parent: What should we do instead?"
                ],
                quiz: {
                  question: "Which picture shows safe behaviour?",
                  options: [
                    "Running on the road",
                    "Crossing at the crosswalk",
                    "Standing in the middle of the street"
                  ],
                  correctIndex: 1
                }
              }
            ]
          },

          /* ---------- MONDAY ---------- */
          mon: {
            title: "Hospital Day ‚Äì LEGO City Ambulance",
            activities: [
              {
                id: "eng",
                domain: "English Speaking & Listening",
                title: "At the hospital",
                pdf: "pdf/w1-mon-english-hospital-story.pdf",
                desc: "–ö–∞—Ä—Ç–∏–Ω–∫–∏ –ø—Ä–∏—ë–º–Ω–æ–≥–æ –æ—Ç–¥–µ–ª–µ–Ω–∏—è, —Ä–µ–±—ë–Ω–æ–∫ –æ–ø–∏—Å—ã–≤–∞–µ—Ç, –∫—Ç–æ —á—Ç–æ –¥–µ–ª–∞–µ—Ç.",
                dialog: [
                  "Parent: Who can you see here?",
                  "Child: A doctor and a patient.",
                  "Parent: What is the doctor doing?",
                  "Child: He is helping.",
                  "Parent: How does the patient feel?"
                ],
                quiz: {
                  question: "Which sentence is best?",
                  options: [
                    "Doctor help.",
                    "The doctor is helping the patient.",
                    "Patient bad."
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "social",
                domain: "Social Confidence / Group Interaction",
                title: "Doctor & patient role play",
                pdf: "pdf/w1-mon-social-doctor-dialogue.pdf",
                desc: "–î–∏–∞–ª–æ–≥ –ø–æ –∫–∞—Ä—Ç–∞–º-—Ä–æ–ª—è–º, –æ—Ç—Ä–∞–±–∞—Ç—ã–≤–∞–µ–º –≤–µ–∂–ª–∏–≤—ã–µ —Ñ—Ä–∞–∑—ã –∏ –æ—Ç–≤–µ—Ç—ã.",
                dialog: [
                  "Parent (doctor): ‚ÄúHello, how are you today?‚Äù",
                  "Child (patient): ‚ÄúI feel a little sick.‚Äù",
                  "Parent: ‚ÄúI will help you. Can you show me where it hurts?‚Äù",
                  "Child: ‚ÄúHere.‚Äù"
                ],
                quiz: {
                  question: "What is a polite answer to ‚ÄúHow are you today?‚Äù",
                  options: [
                    "‚ÄúGo away.‚Äù",
                    "‚ÄúI feel a little sick.‚Äù",
                    "‚ÄúCar!‚Äù"
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "motor",
                domain: "Fine Motor Skills / Early Writing",
                title: "Trace the medical paths",
                pdf: "pdf/w1-mon-motor-hospital-lines.pdf",
                desc: "–°–æ–µ–¥–∏–Ω—è–µ–º –ø–∞—Ü–∏–µ–Ω—Ç–∞ –∏ —Å–∫–æ—Ä—É—é –ø—É–Ω–∫—Ç–∏—Ä–Ω—ã–º–∏ –ª–∏–Ω–∏—è–º–∏, —Ç—Ä–µ–Ω–∏—Ä—É–µ–º –∑–∞—Ö–≤–∞—Ç.",
                dialog: [
                  "Parent: Hold your pencil like this.",
                  "Parent: Let‚Äôs help the ambulance reach the hospital.",
                  "Parent: Great! Try to stay on the dotted line."
                ],
                quiz: {
                  question: "Which grip is better for writing?",
                  options: ["Full fist", "Three-finger pinch", "Holding at the eraser"],
                  correctIndex: 1
                }
              },
              {
                id: "maths",
                domain: "Maths (Numbers & Shapes)",
                title: "Count the hearts",
                pdf: "pdf/w1-mon-maths-hearts-count.pdf",
                desc: "–°—á–∏—Ç–∞–µ–º —Å–µ—Ä–¥–µ—á–∫–∏ –Ω–∞ –º–æ–Ω–∏—Ç–æ—Ä–µ, —Å—Ä–∞–≤–Ω–∏–≤–∞–µ–º: –±–æ–ª—å—à–µ/–º–µ–Ω—å—à–µ.",
                dialog: [
                  "Parent: How many hearts here?",
                  "Parent: Is it more or less than on the other screen?"
                ],
                quiz: {
                  question: "If one screen has 4 hearts and another has 2, which has more?",
                  options: ["4", "2", "They are same"],
                  correctIndex: 0
                }
              },
              {
                id: "slovene",
                domain: "Slovene Language",
                title: "Pri zdravniku",
                pdf: "pdf/w1-mon-slovene-doctor.pdf",
                desc: "–ü—Ä–æ—Å—Ç—ã–µ —Ñ—Ä–∞–∑—ã: boli me roka, glava, trebuh.",
                dialog: [
                  "Parent: Kako se poƒçuti≈°?",
                  "Child: Boli me roka.",
                  "Parent: Dobro, pogledali bomo roko."
                ],
                quiz: {
                  question: "Kaj pomeni ‚ÄòBoli me roka‚Äô?",
                  options: [
                    "–£ –º–µ–Ω—è –±–æ–ª–∏—Ç —Ä—É–∫–∞",
                    "–Ø —Ö–æ—á—É –∏–≥—Ä–∞—Ç—å",
                    "–ú–Ω–µ —Ö–æ–ª–æ–¥–Ω–æ"
                  ],
                  correctIndex: 0
                }
              },
              {
                id: "creative",
                domain: "Creative Development (Art & Role Play)",
                title: "Draw a brave helper",
                pdf: "pdf/w1-mon-creative-helper-template.pdf",
                desc: "–®–∞–±–ª–æ–Ω –¥–ª—è —Ä–∏—Å—É–Ω–∫–∞ ¬´–ú–æ–π –≥–µ—Ä–æ–π: –¥–æ–∫—Ç–æ—Ä/–º–µ–¥—Å–µ—Å—Ç—Ä–∞/–ø–æ–∂–∞—Ä–Ω—ã–π¬ª.",
                dialog: [
                  "Parent: Who is your hero today?",
                  "Child: Doctor.",
                  "Parent: What tools does your hero need?"
                ],
                quiz: {
                  question: "What tool does a doctor often use?",
                  options: ["Stethoscope", "Steering wheel", "Paint brush"],
                  correctIndex: 0
                }
              },
              {
                id: "world",
                domain: "Understanding the World",
                title: "Who works in a hospital?",
                pdf: "pdf/w1-mon-world-hospital-people.pdf",
                desc: "–°–æ–ø–æ—Å—Ç–∞–≤–ª—è–µ–º –ª—é–¥–µ–π –∏ –∏—Ö —Ä–æ–ª–∏: doctor, nurse, driver.",
                dialog: [
                  "Parent: Who drives the ambulance?",
                  "Child: The driver.",
                  "Parent: Who helps the patient in the room?"
                ],
                quiz: {
                  question: "Who helps inside the hospital room?",
                  options: ["Firefighter", "Doctor or nurse", "Police officer"],
                  correctIndex: 1
                }
              }
            ]
          },

          /* ---------- TUESDAY ---------- */
          tue: {
            title: "Rescue Day ‚Äì Helicopter & Mountain",
            activities: [
              {
                id: "eng",
                domain: "English Speaking & Listening",
                title: "Mountain rescue story",
                pdf: "pdf/w1-tue-english-mountain-story.pdf",
                desc: "–ü–æ—Å–ª–µ–¥–æ–≤–∞—Ç–µ–ª—å–Ω–æ—Å—Ç—å –∫–∞—Ä—Ç–∏–Ω–æ–∫: —á–µ–ª–æ–≤–µ–∫ –Ω–∞ –≥–æ—Ä–µ, –≤–µ—Ä—Ç–æ–ª—ë—Ç, —Å–ø–∞—Å–µ–Ω–∏–µ.",
                dialog: [
                  "Parent: First, what happens?",
                  "Child: The man is on the mountain.",
                  "Parent: And then?",
                  "Child: The helicopter comes.",
                  "Parent: And finally?",
                  "Child: They are safe."
                ],
                quiz: {
                  question: "Which is a good ‚Äúfirst‚Äìthen‚Äìfinally‚Äù order?",
                  options: [
                    "Safe ‚Äì helicopter ‚Äì mountain",
                    "Mountain ‚Äì helicopter ‚Äì safe",
                    "Helicopter ‚Äì safe ‚Äì mountain"
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "social",
                domain: "Social Confidence / Group Interaction",
                title: "Team talk in the helicopter",
                pdf: "pdf/w1-tue-social-helicopter-team.pdf",
                desc: "–î–∏–∞–ª–æ–≥ –≤ –∫–æ–º–∞–Ω–¥–µ: –ø—Ä–æ—Å–∏–º –æ –ø–æ–º–æ—â–∏, –æ—Ç–≤–µ—á–∞–µ–º ¬´Yes, I can¬ª.",
                dialog: [
                  "Parent: ‚ÄúPetr, can you help with the rope?‚Äù",
                  "Child: ‚ÄúYes, I can help.‚Äù",
                  "Parent: ‚ÄúThank you, team!‚Äù"
                ],
                quiz: {
                  question: "What is a good team answer?",
                  options: [
                    "‚ÄúI don‚Äôt care.‚Äù",
                    "‚ÄúYes, I can help.‚Äù",
                    "‚ÄúNo words.‚Äù"
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "motor",
                domain: "Fine Motor Skills / Early Writing",
                title: "Spiral flight path",
                pdf: "pdf/w1-tue-motor-spiral-path.pdf",
                desc: "–°–ø–∏—Ä–∞–ª—å–Ω—ã–µ –ª–∏–Ω–∏–∏ ‚Äì –≤–µ—Ä—Ç–æ–ª–µ—Ç –ø–æ–¥–Ω–∏–º–∞–µ—Ç—Å—è –∏ —Å–ø—É—Å–∫–∞–µ—Ç—Å—è.",
                dialog: [
                  "Parent: Let‚Äôs fly up, up, up along the spiral.",
                  "Parent: Now slowly down."
                ],
                quiz: {
                  question: "How should we move the pencil?",
                  options: ["Fast and scribbly", "Slow and smooth", "Not on the line"],
                  correctIndex: 1
                }
              },
              {
                id: "maths",
                domain: "Maths (Numbers & Shapes)",
                title: "Mountain numbers",
                pdf: "pdf/w1-tue-maths-mountain-steps.pdf",
                desc: "–°—Ç—É–ø–µ–Ω—å–∫–∏ —Å —Ü–∏—Ñ—Ä–∞–º–∏ 1‚Äì10, —Ä–µ–±—ë–Ω–æ–∫ –æ–±–≤–æ–¥–∏—Ç –∏ –ø—Ä–æ–≥–æ–≤–∞—Ä–∏–≤–∞–µ—Ç.",
                dialog: [
                  "Parent: Step 1, step 2‚Ä¶ Can you climb to 10?",
                  "Child: One, two, three‚Ä¶"
                ],
                quiz: {
                  question: "What comes after 4?",
                  options: ["3", "5", "7"],
                  correctIndex: 1
                }
              },
              {
                id: "slovene",
                domain: "Slovene Language",
                title: "Na gori",
                pdf: "pdf/w1-tue-slovene-mountain.pdf",
                desc: "–°–ª–æ–≤–∞: gora, helikopter, ƒçlovek. –ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.",
                dialog: [
                  "Parent: Kaj je to?",
                  "Child: To je helikopter.",
                  "Parent: Kje je ƒçlovek?",
                  "Child: Na gori."
                ],
                quiz: {
                  question: "Kaj pomeni ‚Äògora‚Äô?",
                  options: ["–ì–æ—Ä–æ–¥", "–ì–æ—Ä–∞", "–ú–∞—à–∏–Ω–∞"],
                  correctIndex: 1
                }
              },
              {
                id: "creative",
                domain: "Creative Development (Art & Role Play)",
                title: "Build a rescue scene",
                pdf: "pdf/w1-tue-creative-rescue-idea.pdf",
                desc: "–ò–¥–µ—è –¥–ª—è –ø–æ—Å—Ç—Ä–æ–π–∫–∏ –≥–æ—Ä—ã –∏ –≤–µ—Ä—Ç–æ–ª—ë—Ç–∞ –∏–∑ LEGO.",
                dialog: [
                  "Parent: Where will the helicopter land?",
                  "Parent: Can you add a safe place for people?"
                ],
                quiz: {
                  question: "What is important in a rescue scene?",
                  options: ["Safe landing place", "Random holes", "No space"],
                  correctIndex: 0
                }
              },
              {
                id: "world",
                domain: "Understanding the World",
                title: "Weather on the mountain",
                pdf: "pdf/w1-tue-world-weather-cards.pdf",
                desc: "–ö–∞—Ä—Ç–∏–Ω–∫–∏ —Ä–∞–∑–Ω–æ–π –ø–æ–≥–æ–¥—ã, –≤—ã–±–∏—Ä–∞–µ–º –ø–æ–¥—Ö–æ–¥—è—â—É—é –¥–ª—è –≥–æ—Ä.",
                dialog: [
                  "Parent: Is it sunny or windy on this picture?",
                  "Parent: Which weather is safe for flying?"
                ],
                quiz: {
                  question: "Which weather is safer for flying?",
                  options: ["Storm", "Calm and clear", "Heavy snow"],
                  correctIndex: 1
                }
              }
            ]
          },

          /* ---------- WEDNESDAY ---------- */
          wed: {
            title: "City Mix Day ‚Äì All Heroes Together",
            activities: [
              {
                id: "eng",
                domain: "English Speaking & Listening",
                title: "My favourite city hero",
                pdf: "pdf/w1-wed-english-favourite-hero.pdf",
                desc: "–†–µ–±—ë–Ω–æ–∫ –≤—ã–±–∏—Ä–∞–µ—Ç –≥–µ—Ä–æ—è –∏ –∑–∞–ø–æ–ª–Ω—è–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è.",
                dialog: [
                  "Parent: Who is your favourite hero?",
                  "Child: My favourite hero is the firefighter.",
                  "Parent: Why do you like him?",
                  "Child: He helps people."
                ],
                quiz: {
                  question: "Which sentence is complete?",
                  options: [
                    "My favourite hero firefighter.",
                    "My favourite hero is the firefighter.",
                    "Favourite hero is."
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "social",
                domain: "Social Confidence / Group Interaction",
                title: "City meeting role play",
                pdf: "pdf/w1-wed-social-heroes-meeting.pdf",
                desc: "–í—Å–µ –≥–µ—Ä–æ–∏ —Å–æ–±–∏—Ä–∞—é—Ç—Å—è –∏ –æ–±—Å—É–∂–¥–∞—é—Ç, –∫–∞–∫ –ø–æ–º–æ—á—å –≥–æ—Ä–æ–¥—É.",
                dialog: [
                  "Parent (mayor): ‚ÄúThank you for coming!‚Äù",
                  "Parent: ‚ÄúPetr, what can your hero do to help the city?‚Äù",
                  "Child: ‚ÄúHe can stop fires / help people.‚Äù"
                ],
                quiz: {
                  question: "What is a nice way to start a group talk?",
                  options: [
                    "‚ÄúGo away everyone.‚Äù",
                    "‚ÄúThank you for coming!‚Äù",
                    "‚ÄúBe quiet!‚Äù"
                  ],
                  correctIndex: 1
                }
              },
              {
                id: "motor",
                domain: "Fine Motor Skills / Early Writing",
                title: "City map tracing",
                pdf: "pdf/w1-wed-motor-city-map.pdf",
                desc: "–û–±–≤–æ–¥–∏–º –¥–æ—Ä–æ–≥–∏, –º–æ—Å—Ç—ã, —Ä–µ–∫—É, —Å–æ–µ–¥–∏–Ω—è—è –≤–∞–∂–Ω—ã–µ –º–µ—Å—Ç–∞.",
                dialog: [
                  "Parent: Let‚Äôs draw a safe road from home to the station.",
                  "Parent: Try to stay inside the line."
                ],
                quiz: {
                  question: "Where should roads go?",
                  options: ["Through houses", "Around houses and buildings", "Outside the page"],
                  correctIndex: 1
                }
              },
              {
                id: "maths",
                domain: "Maths (Numbers & Shapes)",
                title: "City numbers & shapes",
                pdf: "pdf/w1-wed-maths-city-mix.pdf",
                desc: "–°—á–∏—Ç–∞–µ–º –¥–æ–º–∞, –º–∞—à–∏–Ω—ã, –∏—â–µ–º –∏ –Ω–∞–∑—ã–≤–∞–µ–º —Ñ–æ—Ä–º—ã.",
                dialog: [
                  "Parent: How many squares can you find?",
                  "Parent: Show me three circles."
                ],
                quiz: {
                  question: "Which is a circle?",
                  options: ["‚¨õ", "‚ö™", "üî∫"],
                  correctIndex: 1
                }
              },
              {
                id: "slovene",
                domain: "Slovene Language",
                title: "Moje mesto",
                pdf: "pdf/w1-wed-slovene-my-city.pdf",
                desc: "–ü—Ä–æ—Å—Ç—ã–µ –ø—Ä–µ–¥–ª–æ–∂–µ–Ω–∏—è –æ –≥–æ—Ä–æ–¥–µ: To je hi≈°a, To je most.",
                dialog: [
                  "Parent: Kaj je to?",
                  "Child: To je hi≈°a.",
                  "Parent: Super! In to?",
                  "Child: To je most."
                ],
                quiz: {
                  question: "Kaj pomeni ‚Äòhi≈°a‚Äô?",
                  options: ["–î–æ–º", "–ú–æ—Å—Ç", "–ú–∞—à–∏–Ω–∞"],
                  correctIndex: 0
                }
              },
              {
                id: "creative",
                domain: "Creative Development (Art & Role Play)",
                title: "Draw your LEGO City",
                pdf: "pdf/w1-wed-creative-my-city-template.pdf",
                desc: "–õ–∏—Å—Ç —Å —Ä–∞–º–∫–æ–π –∏ –ø–æ–¥—Å–∫–∞–∑–∫–∞–º–∏, —Ä–µ–±—ë–Ω–æ–∫ —Ä–∏—Å—É–µ—Ç —Å–≤–æ–π –≥–æ—Ä–æ–¥.",
                dialog: [
                  "Parent: Where is the fire station in your city?",
                  "Parent: Where do you live in this picture?"
                ],
                quiz: {
                  question: "What can we add to a city picture?",
                  options: ["Houses and roads", "Random scribbles", "Only one dot"],
                  correctIndex: 0
                }
              },
              {
                id: "world",
                domain: "Understanding the World",
                title: "Who helps in the city?",
                pdf: "pdf/w1-wed-world-city-helpers.pdf",
                desc: "–°–æ–µ–¥–∏–Ω—è–µ–º –ø—Ä–æ—Ñ–µ—Å—Å–∏–∏ –∏ –º–µ—Å—Ç–∞: firefighter‚Äìstation, doctor‚Äìhospital.",
                dialog: [
                  "Parent: Who works in the hospital?",
                  "Child: Doctor.",
                  "Parent: And who works at the fire station?"
                ],
                quiz: {
                  question: "Who works at the fire station?",
                  options: ["Doctor", "Firefighter", "Pilot"],
                  correctIndex: 1
                }
              }
            ]
          }
        }
      },

      // –û—Å—Ç–∞–ª—å–Ω—ã–µ –Ω–µ–¥–µ–ª–∏ –∏—Å–ø–æ–ª—å–∑—É—é—Ç —Ç—É –∂–µ —Å—Ç—Ä—É–∫—Ç—É—Ä—É (–º–æ–∂–Ω–æ –ø–æ—Ç–æ–º –∑–∞–º–µ–Ω–∏—Ç—å —Å–æ–¥–µ—Ä–∂–∏–º–æ–µ –Ω–∞ —Å–≤–æ–∏ —Ç–µ–º—ã)
      week2: { label: "Week 2 ‚Äì City Vehicles", englishPhrases: [], slovenePhrases: [], days: {} },
      week3: { label: "Week 3 ‚Äì City Jobs", englishPhrases: [], slovenePhrases: [], days: {} },
      week4: { label: "Week 4 ‚Äì City Adventures", englishPhrases: [], slovenePhrases: [], days: {} }
    };

    ["week2", "week3", "week4"].forEach((wkKey) => {
      PROGRAM[wkKey].days = PROGRAM.week1.days;
      PROGRAM[wkKey].englishPhrases = PROGRAM.week1.englishPhrases;
      PROGRAM[wkKey].slovenePhrases = PROGRAM.week1.slovenePhrases;
    });

    // === STATE ===
    let state = loadState();

    childNameInput.value = state.childName || "Petr";
    childLabel.textContent = state.childName || "Petr";
    weekSelect.value = state.week || "week1";
    daySelect.value = state.day || "sat";

    // audio
    const audioPhrase = new Audio();
    const audioClick = new Audio();
    const audioSuccess = new Audio();

    audioClick.src = "audio/click.mp3";
    audioSuccess.src = "audio/success.mp3";

    renderPhrases();
    renderDay();
    notesArea.value = (state.notes[state.week] || {})[state.day] || "";

    // EVENTS

    childNameInput.addEventListener("input", () => {
      state.childName = childNameInput.value.trim();
      childLabel.textContent = state.childName || "Petr";
      saveState();
    });

    weekSelect.addEventListener("change", () => {
      state.week = weekSelect.value;
      saveState();
      playClick();
      renderPhrases();
      renderDay();
      notesArea.value = (state.notes[state.week] || {})[state.day] || "";
    });

    daySelect.addEventListener("change", () => {
      state.day = daySelect.value;
      saveState();
      playClick();
      renderDay();
      notesArea.value = (state.notes[state.week] || {})[state.day] || "";
    });

    notesArea.addEventListener("input", () => {
      if (!state.notes[state.week]) state.notes[state.week] = {};
      state.notes[state.week][state.day] = notesArea.value;
      saveState();
    });

    startQuestsBtn.addEventListener("click", () => {
      playClick();
      questsSection.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    scrollToPhrasesBtn.addEventListener("click", () => {
      playClick();
      phrasesSection.scrollIntoView({ behavior: "smooth", block: "start" });
    });

    // === RENDER PHRASES ===

    function renderPhrases() {
      const weekData = PROGRAM[weekSelect.value];
      phrasesWeekLabel.textContent = weekData.label;
      englishPhrasesEl.innerHTML = "";
      slovenePhrasesEl.innerHTML = "";

      weekData.englishPhrases.forEach((p) => {
        englishPhrasesEl.appendChild(createPhraseCard(p, "EN"));
      });
      weekData.slovenePhrases.forEach((p) => {
        slovenePhrasesEl.appendChild(createPhraseCard(p, "SL"));
      });
    }

    function createPhraseCard(phrase, lang) {
      const card = document.createElement("div");
      card.className = "phrase-card";

      const header = document.createElement("div");
      header.className = "phrase-header";

      const text = document.createElement("div");
      text.className = "phrase-text-main";
      text.textContent = phrase.text;

      const btn = document.createElement("button");
      btn.type = "button";
      btn.className = "btn-circle";
      btn.textContent = "‚ñ∂ Play";
      btn.addEventListener("click", () => {
        playClick();
        const src = `audio/${phrase.id}.mp3`;
        audioPhrase.src = src;
        audioPhrase.play().catch(() => {
          alert("Audio file not found yet. Please upload " + src + " to the repository.");
        });
      });

      header.appendChild(text);
      header.appendChild(btn);

      const tr = document.createElement("div");
      tr.className = "phrase-translation";
      tr.textContent = phrase.translation;

      const tip = document.createElement("div");
      tip.className = "phrase-tip";
      tip.textContent = phrase.tip || "";

      card.appendChild(header);
      card.appendChild(tr);
      card.appendChild(tip);

      return card;
    }

    // === RENDER DAY & QUESTS ===

    function renderDay() {
      const weekKey = weekSelect.value;
      const dayKey = daySelect.value;
      const weekData = PROGRAM[weekKey];
      const dayData = weekData.days[dayKey];

      dayLabel.textContent = `${DAYS_LABEL[dayKey]} ¬∑ ${dayData.title}`;
      missionsGrid.innerHTML = "";

      const activities = dayData.activities;
      updateQuestDots(activities);

      if (!activities || !activities.length) {
        const p = document.createElement("p");
        p.className = "small-text";
        p.textContent = "This day has no detailed quests yet. You can add your own PDFs and games later.";
        missionsGrid.appendChild(p);
        totalMissionsEl.textContent = "0";
        doneCountEl.textContent = "0";
        checkedCountEl.textContent = "0";
        progressBarEl.style.width = "0%";
        return;
      }

      activities.forEach((act, index) => {
        missionsGrid.appendChild(createMissionCard(weekKey, dayKey, act, index));
      });

      updateSummary(weekKey, dayKey);
    }

    function updateQuestDots(activities) {
      questDots.innerHTML = "";
      (activities || []).forEach((_, idx) => {
        const dot = document.createElement("div");
        dot.className = "quest-dot";
        dot.textContent = idx + 1;
        dot.dataset.index = idx;
        questDots.appendChild(dot);
      });
    }

    function createMissionCard(weekKey, dayKey, act, index) {
      const card = document.createElement("div");
      card.className = "mission-card";

      const headerRow = document.createElement("div");
      headerRow.className = "mission-header-row";

      const icon = document.createElement("div");
      icon.className = "mission-icon";
      icon.textContent = DOMAIN_ICONS[act.domain] || "‚≠ê";

      const headerText = document.createElement("div");

      const domainEl = document.createElement("div");
      domainEl.className = "mission-domain";
      domainEl.textContent = act.domain;

      const titleEl = document.createElement("div");
      titleEl.className = "mission-title";
      titleEl.textContent = act.title;

      headerText.appendChild(domainEl);
      headerText.appendChild(titleEl);

      headerRow.appendChild(icon);
      headerRow.appendChild(headerText);

      const descEl = document.createElement("div");
      descEl.className = "mission-desc";
      descEl.textContent = act.desc;

      const actions = document.createElement("div");
      actions.className = "mission-actions";

      const pdfBtn = document.createElement("a");
      pdfBtn.className = "btn quest-btn";
      pdfBtn.href = act.pdf;
      pdfBtn.target = "_blank";
      pdfBtn.rel = "noopener";
      pdfBtn.innerHTML = "<span>üìÑ</span> Open PDF";
      pdfBtn.addEventListener("click", () => playClick());

      const hintBtn = document.createElement("button");
      hintBtn.type = "button";
      hintBtn.className = "quest-btn";
      hintBtn.innerHTML = "<span>‚ÑπÔ∏è</span> PDF path";
      hintBtn.addEventListener("click", () => {
        playClick();
        alert("Upload the PDF for this quest to:\n" + act.pdf);
      });

      const questBtn = document.createElement("button");
      questBtn.type = "button";
      questBtn.className = "quest-btn";
      questBtn.innerHTML = "<span>üéÆ</span> Start quest";
      questBtn.addEventListener("click", () => {
        playClick();
        // –ø—Ä–æ—Å—Ç–æ —Å—Ñ–æ–∫—É—Å–∏—Ä–æ–≤–∞—Ç—å—Å—è –Ω–∞ –∫–∞—Ä—Ç–æ—á–∫–µ –∏ –≤–∏–∑—É–∞–ª—å–Ω–æ –µ—ë –≤—ã–¥–µ–ª–∏—Ç—å
        card.scrollIntoView({ behavior: "smooth", block: "center" });
        card.style.boxShadow = "0 0 0 3px #facc15";
        setTimeout(() => {
          card.style.boxShadow = "";
        }, 800);
      });

      actions.appendChild(pdfBtn);
      actions.appendChild(questBtn);
      actions.appendChild(hintBtn);

      const status = document.createElement("div");
      status.className = "mission-status";

      const actState = getActivityState(weekKey, dayKey, act.id);

      const doneLabel = document.createElement("label");
      const doneCheckbox = document.createElement("input");
      doneCheckbox.type = "checkbox";
      doneCheckbox.checked = !!actState.done;
      doneLabel.appendChild(doneCheckbox);
      doneLabel.append(" Done by child");

      const checkedLabel = document.createElement("label");
      const checkedCheckbox = document.createElement("input");
      checkedCheckbox.type = "checkbox";
      checkedCheckbox.checked = !!actState.checked;
      checkedLabel.appendChild(checkedCheckbox);
      checkedLabel.append(" Checked by parent");

      doneCheckbox.addEventListener("change", () => {
        actState.done = doneCheckbox.checked;
        if (!actState.done && actState.checked) {
          actState.checked = false;
          checkedCheckbox.checked = false;
        }
        playClick();
        saveState();
        updateSummary(weekKey, dayKey);
        updateQuestDotCompletion(index, actState);
      });

      checkedCheckbox.addEventListener("change", () => {
        actState.checked = checkedCheckbox.checked;
        if (actState.checked && !actState.done) {
          actState.done = true;
          doneCheckbox.checked = true;
        }
        playClick();
        if (actState.checked) playSuccess();
        saveState();
        updateSummary(weekKey, dayKey);
        updateQuestDotCompletion(index, actState);
      });

      status.appendChild(doneLabel);
      status.appendChild(checkedLabel);

      const details = document.createElement("details");
      const summary = document.createElement("summary");
      summary.textContent = "Parent dialogue idea";
      details.appendChild(summary);

      const dialogText = document.createElement("div");
      dialogText.className = "dialog-text";
      dialogText.innerHTML = (act.dialog || [])
        .map((line) =>
          line
            .replace(/Parent/g, "<strong>Parent</strong>")
            .replace(/Child/g, "<strong>Child</strong>")
        )
        .join("<br>");
      details.appendChild(dialogText);

      const quizBlock = createQuizBlock(act.quiz);

      card.appendChild(headerRow);
      card.appendChild(descEl);
      card.appendChild(actions);
      card.appendChild(status);
      card.appendChild(details);
      if (quizBlock) card.appendChild(quizBlock);

      // initial dot state
      updateQuestDotCompletion(index, actState);

      return card;
    }

    function createQuizBlock(quiz) {
      if (!quiz) return null;

      const block = document.createElement("div");
      block.className = "quiz-block";

      const q = document.createElement("div");
      q.className = "quiz-question";
      q.textContent = quiz.question;

      const optsWrap = document.createElement("div");
      optsWrap.className = "quiz-options";

      const feedback = document.createElement("div");
      feedback.className = "quiz-feedback";

      quiz.options.forEach((opt, idx) => {
        const btn = document.createElement("button");
        btn.type = "button";
        btn.className = "quiz-option-btn";
        btn.textContent = opt;
        btn.addEventListener("click", () => {
          playClick();
          // —Å–±—Ä–æ—Å –∫–ª–∞—Å—Å–æ–≤
          Array.from(optsWrap.children).forEach((c) => {
            c.classList.remove("correct", "wrong");
          });
          if (idx === quiz.correctIndex) {
            btn.classList.add("correct");
            feedback.textContent = "Great! ‚≠ê";
            feedback.classList.add("ok");
            feedback.classList.remove("bad");
            playSuccess();
          } else {
            btn.classList.add("wrong");
            feedback.textContent = "Try again.";
            feedback.classList.add("bad");
            feedback.classList.remove("ok");
          }
        });
        optsWrap.appendChild(btn);
      });

      block.appendChild(q);
      block.appendChild(optsWrap);
      block.appendChild(feedback);

      return block;
    }

    function updateQuestDotCompletion(index, actState) {
      const dot = questDots.querySelector(`.quest-dot[data-index="${index}"]`);
      if (!dot) return;
      if (actState.checked) {
        dot.classList.add("completed");
      } else {
        dot.classList.remove("completed");
      }
    }

    function updateSummary(weekKey, dayKey) {
      const acts = PROGRAM[weekKey].days[dayKey].activities || [];
      const total = acts.length;
      let done = 0;
      let checked = 0;
      acts.forEach((act) => {
        const st = getActivityState(weekKey, dayKey, act.id);
        if (st.done) done++;
        if (st.checked) checked++;
      });

      totalMissionsEl.textContent = total;
      doneCountEl.textContent = done;
      checkedCountEl.textContent = checked;

      const percent = total ? Math.round((checked / total) * 100) : 0;
      progressBarEl.style.width = percent + "%";
    }

    // === STATE HELPERS ===

    function getActivityState(weekKey, dayKey, actId) {
      if (!state.activities[weekKey]) state.activities[weekKey] = {};
      if (!state.activities[weekKey][dayKey]) state.activities[weekKey][dayKey] = {};
      if (!state.activities[weekKey][dayKey][actId]) {
        state.activities[weekKey][dayKey][actId] = { done: false, checked: false };
      }
      return state.activities[weekKey][dayKey][actId];
    }

    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) {
          return {
            childName: "Petr",
            week: "week1",
            day: "sat",
            activities: {},
            notes: {}
          };
        }
        const parsed = JSON.parse(raw);
        if (!parsed.activities) parsed.activities = {};
        if (!parsed.notes) parsed.notes = {};
        if (!parsed.week) parsed.week = "week1";
        if (!parsed.day) parsed.day = "sat";
        return parsed;
      } catch (e) {
        console.error("Failed to load state", e);
        return {
          childName: "Petr",
          week: "week1",
          day: "sat",
          activities: {},
          notes: {}
        };
      }
    }

    function saveState() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }

    // === SOUNDS ===

    function playClick() {
      if (!audioClick.src) return;
      audioClick.currentTime = 0;
      audioClick.play().catch(() => {});
    }

    function playSuccess() {
      if (!audioSuccess.src) return;
      audioSuccess.currentTime = 0;
      audioSuccess.play().catch(() => {});
    }
  })();
</script>
</body>
</html>
