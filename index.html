<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>LEGO City Learning ‚Äì Weekly Missions</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    * {
      box-sizing: border-box;
      font-family: system-ui, -apple-system, BlinkMacSystemFont, "Segoe UI", sans-serif;
    }

    body {
      margin: 0;
      background: radial-gradient(circle at top, #fee2e2 0, #fef3c7 30%, #eff6ff 80%);
      color: #111827;
    }

    header {
      padding: 1.1rem 1.5rem;
      background: linear-gradient(90deg, #0ea5e9, #6366f1);
      color: white;
      display: flex;
      flex-wrap: wrap;
      align-items: center;
      justify-content: space-between;
      gap: 1rem;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.25);
    }

    header h1 {
      margin: 0;
      font-size: 1.6rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    header h1 span {
      font-size: 2rem;
    }

    header small {
      display: block;
      font-size: 0.8rem;
      opacity: 0.9;
    }

    .top-controls {
      display: flex;
      flex-wrap: wrap;
      gap: 0.75rem;
      align-items: center;
    }

    label {
      font-size: 0.8rem;
      color: #e5e7eb;
    }

    input[type="text"],
    select {
      border-radius: 0.75rem;
      border: 1px solid #d1d5db;
      padding: 0.35rem 0.6rem;
      font-size: 0.9rem;
      background: white;
      min-width: 0;
    }

    main {
      max-width: 1100px;
      margin: 0 auto 2rem;
      padding: 1rem;
    }

    .hero {
      margin-top: 0.5rem;
      margin-bottom: 1rem;
      display: grid;
      grid-template-columns: minmax(0, 1.8fr) minmax(0, 1.2fr);
      gap: 1rem;
    }

    @media (max-width: 900px) {
      .hero {
        grid-template-columns: 1fr;
      }
    }

    .card {
      background: white;
      border-radius: 1rem;
      padding: 1rem;
      box-shadow: 0 10px 22px rgba(15, 23, 42, 0.1);
    }

    .hero-title {
      font-size: 1.1rem;
      font-weight: 700;
      margin-bottom: 0.3rem;
      display: flex;
      align-items: center;
      gap: 0.4rem;
    }

    .hero-title span {
      font-size: 1.4rem;
    }

    .pill {
      display: inline-flex;
      align-items: center;
      gap: 0.2rem;
      font-size: 0.75rem;
      padding: 0.1rem 0.6rem;
      border-radius: 999px;
      background: #fef3c7;
      border: 1px solid #facc15;
      color: #92400e;
      margin-bottom: 0.4rem;
    }

    .hero-text {
      font-size: 0.9rem;
      color: #374151;
    }

    .lego-city {
      display: grid;
      gap: 0.35rem;
      font-size: 0.9rem;
    }

    .lego-row {
      display: flex;
      gap: 0.3rem;
    }

    .brick {
      flex: 1;
      height: 26px;
      border-radius: 0.4rem;
      position: relative;
      box-shadow: 0 3px 0 rgba(15, 23, 42, 0.25);
    }

    .brick::before {
      content: "";
      position: absolute;
      top: -7px;
      left: 6px;
      width: 14px;
      height: 7px;
      border-radius: 0.4rem 0.4rem 0.1rem 0.1rem;
      background: rgba(255, 255, 255, 0.4);
    }

    .brick.red { background: #f97373; }
    .brick.blue { background: #3b82f6; }
    .brick.yellow { background: #facc15; }
    .brick.green { background: #22c55e; }

    .robot-bubble {
      background: #111827;
      color: white;
      border-radius: 1.3rem;
      padding: 0.7rem 0.9rem;
      font-size: 0.85rem;
      margin-bottom: 0.4rem;
      max-width: 270px;
      box-shadow: 0 8px 18px rgba(15, 23, 42, 0.35);
    }

    .robot-face {
      font-size: 3.4rem;
      text-align: center;
    }

    .layout {
      display: grid;
      grid-template-columns: minmax(0, 2.2fr) minmax(0, 1.5fr);
      gap: 1rem;
    }

    @media (max-width: 900px) {
      .layout {
        grid-template-columns: 1fr;
      }
    }

    h2.section-title {
      font-size: 1rem;
      margin: 0 0 0.3rem;
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.5rem;
    }

    .badge {
      font-size: 0.7rem;
      padding: 0.15rem 0.5rem;
      border-radius: 999px;
      background: #eff6ff;
      color: #1d4ed8;
      border: 1px solid #bfdbfe;
      white-space: nowrap;
    }

    .missions-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(210px, 1fr));
      gap: 0.7rem;
    }

    .mission-card {
      border-radius: 1rem;
      border: 1px solid #e5e7eb;
      padding: 0.7rem 0.7rem 0.6rem;
      background: #f9fafb;
      display: flex;
      flex-direction: column;
      gap: 0.4rem;
      position: relative;
      overflow: hidden;
    }

    .mission-day {
      font-size: 0.8rem;
      font-weight: 700;
      text-transform: uppercase;
      letter-spacing: 0.04em;
      color: #6b7280;
    }

    .mission-name {
      font-size: 0.95rem;
      font-weight: 700;
      color: #111827;
    }

    .mission-desc {
      font-size: 0.8rem;
      color: #4b5563;
    }

    .mission-actions {
      display: flex;
      align-items: center;
      justify-content: space-between;
      gap: 0.4rem;
      margin-top: 0.2rem;
    }

    .btn {
      border-radius: 999px;
      border: none;
      padding: 0.35rem 0.7rem;
      font-size: 0.8rem;
      cursor: pointer;
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      text-decoration: none;
    }

    .btn-primary {
      background: #2563eb;
      color: white;
    }

    .btn-primary:hover {
      filter: brightness(1.05);
    }

    .btn-ghost {
      background: transparent;
      border: 1px dashed #9ca3af;
      color: #374151;
    }

    .mission-status {
      margin-top: 0.25rem;
      display: flex;
      flex-wrap: wrap;
      gap: 0.4rem;
      font-size: 0.78rem;
      color: #374151;
    }

    .mission-status label {
      display: inline-flex;
      align-items: center;
      gap: 0.25rem;
      cursor: pointer;
      font-size: 0.78rem;
      color: #374151;
    }

    .mission-status input[type="checkbox"] {
      transform: scale(1.05);
      cursor: pointer;
    }

    .progress-card {
      display: flex;
      flex-direction: column;
      gap: 0.5rem;
    }

    .progress-bar-wrapper {
      width: 100%;
      height: 10px;
      border-radius: 999px;
      background: #e5e7eb;
      overflow: hidden;
    }

    .progress-bar {
      height: 100%;
      width: 0%;
      background: linear-gradient(90deg, #22c55e, #16a34a);
      transition: width 0.2s ease-out;
    }

    .small-text {
      font-size: 0.78rem;
      color: #6b7280;
    }

    textarea {
      width: 100%;
      resize: vertical;
      border-radius: 0.75rem;
      border: 1px solid #d1d5db;
      padding: 0.5rem 0.6rem;
      font-size: 0.85rem;
      min-height: 120px;
    }

    .footer-note {
      text-align: center;
      font-size: 0.75rem;
      color: #9ca3af;
      margin-top: 1rem;
      margin-bottom: 0.5rem;
    }
  </style>
</head>
<body>
<header>
  <div>
    <h1><span>üß±</span> LEGO City Learning</h1>
    <small>Weekly missions for Petr ‚Äì build, count, talk and explore the city</small>
  </div>
  <div class="top-controls">
    <label>
      Child name:
      <input type="text" id="childName" placeholder="Petr" />
    </label>
    <label>
      Week:
      <select id="weekSelect">
        <option value="week1">Week 1 ‚Äì City Heroes</option>
        <option value="week2">Week 2 ‚Äì City Vehicles</option>
        <option value="week3">Week 3 ‚Äì City Jobs</option>
      </select>
    </label>
  </div>
</header>

<main>
  <!-- Hero -->
  <section class="hero">
    <div class="card">
      <div class="hero-title"><span>üèôÔ∏è</span>Welcome to LEGO City Missions</div>
      <div class="pill">Theme: LEGO City ¬∑ English ¬∑ Maths ¬∑ Slovene</div>
      <p class="hero-text">
        Every day Petr gets a small mission in the LEGO City world: build, trace, count, talk and imagine.
        Each card below has a PDF that you can print and work on together.
        Check the boxes when the mission is done.
      </p>
      <div class="lego-city" aria-hidden="true">
        <div class="lego-row">
          <div class="brick red"></div>
          <div class="brick blue"></div>
          <div class="brick yellow"></div>
          <div class="brick green"></div>
        </div>
        <div class="lego-row">
          <div class="brick blue"></div>
          <div class="brick yellow"></div>
          <div class="brick red"></div>
          <div class="brick green"></div>
        </div>
      </div>
    </div>

    <div class="card">
      <div class="robot-bubble">
        Hi! I am your LEGO City guide. Choose today‚Äôs mission, download the PDF and let‚Äôs play and learn!
      </div>
      <div class="robot-face">ü§ñ</div>
    </div>
  </section>

  <!-- Layout -->
  <section class="layout">
    <!-- Daily missions -->
    <section class="card">
      <h2 class="section-title">
        Daily LEGO City missions
        <span class="badge" id="weekLabel">Week 1 ‚Äì City Heroes</span>
      </h2>
      <p class="small-text">
        Download the PDF for each day. After you work with Petr, mark <strong>‚ÄúDone by child‚Äù</strong> and
        <strong>‚ÄúChecked by parent‚Äù</strong>. All progress stays in this browser (localStorage).
      </p>

      <div class="missions-grid" id="missionsGrid">
        <!-- cards from JS -->
      </div>
    </section>

    <!-- Progress + notes -->
    <aside class="card progress-card">
      <h2 class="section-title">
        Weekly progress
        <span class="badge" id="childLabel">Petr</span>
      </h2>

      <div>
        <div>Total missions this week: <strong id="totalMissions">0</strong></div>
        <div>Done by child: <strong id="doneCount">0</strong></div>
        <div>Checked by parent: <strong id="checkedCount">0</strong></div>
        <div class="progress-bar-wrapper">
          <div class="progress-bar" id="progressBar"></div>
        </div>
        <p class="small-text">
          Progress bar shows how many missions are <strong>checked by parent</strong>.
        </p>
      </div>

      <div>
        <label for="notesArea">Parent notes for this week</label>
        <textarea id="notesArea" placeholder="Observations, new words, what Petr enjoyed most‚Ä¶"></textarea>
      </div>
    </aside>
  </section>

  <p class="footer-note">
    LEGO City Learning ‚Äì you can add or replace PDFs and texts to match your own programme for Petr.
  </p>
</main>

<script>
  (function () {
    const STORAGE_KEY = "legoCityWeek_v1";

    const childNameInput = document.getElementById("childName");
    const weekSelect = document.getElementById("weekSelect");
    const weekLabel = document.getElementById("weekLabel");
    const missionsGrid = document.getElementById("missionsGrid");
    const childLabel = document.getElementById("childLabel");
    const totalMissionsEl = document.getElementById("totalMissions");
    const doneCountEl = document.getElementById("doneCount");
    const checkedCountEl = document.getElementById("checkedCount");
    const progressBarEl = document.getElementById("progressBar");
    const notesArea = document.getElementById("notesArea");

    // === DATA: weekly missions ===
    // –ó–¥–µ—Å—å –ø—Ä–æ—Å—Ç–æ —Ç–µ–∫—Å—Ç –∏ –∏–º–µ–Ω–∞ PDF ‚Äî —Ç—ã —Å–º–æ–∂–µ—à—å –∑–∞–º–µ–Ω–∏—Ç—å –∏—Ö –Ω–∞ —Å–≤–æ–∏.
    const WEEKS = {
      week1: {
        label: "Week 1 ‚Äì City Heroes",
        missions: [
          {
            id: "mon",
            day: "Monday",
            name: "Fire Station Rescue",
            desc: "Count fire trucks, trace lines to the fire and learn new English words.",
            pdf: "pdf/week1-day1-fire-station.pdf"
          },
          {
            id: "tue",
            day: "Tuesday",
            name: "Police Car Chase",
            desc: "Follow the dotted roads, compare sizes and say what you can see.",
            pdf: "pdf/week1-day2-police-car.pdf"
          },
          {
            id: "wed",
            day: "Wednesday",
            name: "City Park Building",
            desc: "Build a small park with LEGO, draw trees and talk about colours.",
            pdf: "pdf/week1-day3-city-park.pdf"
          },
          {
            id: "thu",
            day: "Thursday",
            name: "Construction Site",
            desc: "Match shapes to bricks, practise numbers and simple Slovene words.",
            pdf: "pdf/week1-day4-construction.pdf"
          },
          {
            id: "fri",
            day: "Friday",
            name: "Train Station Trip",
            desc: "Follow straight and wavy lines, count passengers, describe the train.",
            pdf: "pdf/week1-day5-train-station.pdf"
          },
          {
            id: "sat",
            day: "Saturday",
            name: "City Airport Adventure",
            desc: "Circle objects, practise 'Robot sees a‚Ä¶' with planes and luggage.",
            pdf: "pdf/week1-day6-airport.pdf"
          },
          {
            id: "sun",
            day: "Sunday",
            name: "City Heroes Story",
            desc: "Look at pictures and tell your own LEGO City story in English.",
            pdf: "pdf/week1-day7-story.pdf"
          }
        ]
      },
      week2: {
        label: "Week 2 ‚Äì City Vehicles",
        missions: [
          { id: "mon", day: "Monday", name: "Cars & Garages", desc: "Sort cars by colour and size.", pdf: "pdf/week2-day1-cars.pdf" },
          { id: "tue", day: "Tuesday", name: "Boats & Harbour", desc: "Trace waves, count boats.", pdf: "pdf/week2-day2-boats.pdf" },
          { id: "wed", day: "Wednesday", name: "Helicopter Pad", desc: "Follow spiral lines, say positions.", pdf: "pdf/week2-day3-helicopter.pdf" },
          { id: "thu", day: "Thursday", name: "Bus Stop Maths", desc: "Add and remove LEGO people from the bus.", pdf: "pdf/week2-day4-bus.pdf" },
          { id: "fri", day: "Friday", name: "Emergency Vehicles", desc: "Match sounds to vehicles.", pdf: "pdf/week2-day5-emergency.pdf" },
          { id: "sat", day: "Saturday", name: "Garage Workshop", desc: "Circle tools, practise Slovene names.", pdf: "pdf/week2-day6-workshop.pdf" },
          { id: "sun", day: "Sunday", name: "Vehicle Parade", desc: "Describe your favourite vehicle.", pdf: "pdf/week2-day7-parade.pdf" }
        ]
      },
      week3: {
        label: "Week 3 ‚Äì City Jobs",
        missions: [
          { id: "mon", day: "Monday", name: "Firefighter", desc: "Talk about jobs and tools.", pdf: "pdf/week3-day1-firefighter.pdf" },
          { id: "tue", day: "Tuesday", name: "Police Officer", desc: "Role-play simple dialogues.", pdf: "pdf/week3-day2-police.pdf" },
          { id: "wed", day: "Wednesday", name: "Builder", desc: "Build a small house and count bricks.", pdf: "pdf/week3-day3-builder.pdf" },
          { id: "thu", day: "Thursday", name: "Doctor", desc: "Name body parts and feelings.", pdf: "pdf/week3-day4-doctor.pdf" },
          { id: "fri", day: "Friday", name: "Shopkeeper", desc: "Play LEGO City shop with coins.", pdf: "pdf/week3-day5-shop.pdf" },
          { id: "sat", day: "Saturday", name: "Pilot", desc: "Trace flight paths and clouds.", pdf: "pdf/week3-day6-pilot.pdf" },
          { id: "sun", day: "Sunday", name: "My Dream Job", desc: "Draw and describe a future job.", pdf: "pdf/week3-day7-dream-job.pdf" }
        ]
      }
    };

    // === STATE ===
    let state = loadState();

    // init inputs
    childNameInput.value = state.childName || "Petr";
    childLabel.textContent = state.childName || "Petr";
    weekSelect.value = state.selectedWeek || "week1";
    weekLabel.textContent = WEEKS[weekSelect.value].label;

    renderMissions();
    updateWeeklySummary();
    notesArea.value = state.notes[weekSelect.value] || "";

    // === events ===
    childNameInput.addEventListener("input", () => {
      state.childName = childNameInput.value.trim();
      childLabel.textContent = state.childName || "Petr";
      saveState();
    });

    weekSelect.addEventListener("change", () => {
      state.selectedWeek = weekSelect.value;
      weekLabel.textContent = WEEKS[weekSelect.value].label;
      notesArea.value = state.notes[weekSelect.value] || "";
      renderMissions();
      updateWeeklySummary();
      saveState();
    });

    notesArea.addEventListener("input", () => {
      state.notes[weekSelect.value] = notesArea.value;
      saveState();
    });

    // === functions ===

    function renderMissions() {
      const weekKey = weekSelect.value;
      const data = WEEKS[weekKey];
      missionsGrid.innerHTML = "";

      data.missions.forEach((mission) => {
        const card = document.createElement("div");
        card.className = "mission-card";

        const dayEl = document.createElement("div");
        dayEl.className = "mission-day";
        dayEl.textContent = mission.day;

        const nameEl = document.createElement("div");
        nameEl.className = "mission-name";
        nameEl.textContent = mission.name;

        const descEl = document.createElement("div");
        descEl.className = "mission-desc";
        descEl.textContent = mission.desc;

        const actions = document.createElement("div");
        actions.className = "mission-actions";

        const link = document.createElement("a");
        link.className = "btn btn-primary";
        link.href = mission.pdf;
        link.target = "_blank";
        link.rel = "noopener";
        link.textContent = "Download PDF";

        const placeholder = document.createElement("button");
        placeholder.type = "button";
        placeholder.className = "btn btn-ghost";
        placeholder.textContent = "Open later";
        placeholder.addEventListener("click", () => {
          alert("You can upload the PDF for this mission to the path:\n" + mission.pdf);
        });

        actions.appendChild(link);
        actions.appendChild(placeholder);

        const status = document.createElement("div");
        status.className = "mission-status";

        const doneLabel = document.createElement("label");
        const doneCheckbox = document.createElement("input");
        doneCheckbox.type = "checkbox";
        doneCheckbox.checked = !!getMissionState(weekKey, mission.id).done;
        doneLabel.appendChild(doneCheckbox);
        doneLabel.append(" Done by child");

        const checkedLabel = document.createElement("label");
        const checkedCheckbox = document.createElement("input");
        checkedCheckbox.type = "checkbox";
        checkedCheckbox.checked = !!getMissionState(weekKey, mission.id).checked;
        checkedLabel.appendChild(checkedCheckbox);
        checkedLabel.append(" Checked by parent");

        doneCheckbox.addEventListener("change", () => {
          const m = getMissionState(weekKey, mission.id);
          m.done = doneCheckbox.checked;
          if (!m.done && m.checked) {
            m.checked = false;
            checkedCheckbox.checked = false;
          }
          saveState();
          updateWeeklySummary();
        });

        checkedCheckbox.addEventListener("change", () => {
          const m = getMissionState(weekKey, mission.id);
          m.checked = checkedCheckbox.checked;
          if (m.checked && !m.done) {
            m.done = true;
            doneCheckbox.checked = true;
          }
          saveState();
          updateWeeklySummary();
        });

        status.appendChild(doneLabel);
        status.appendChild(checkedLabel);

        card.appendChild(dayEl);
        card.appendChild(nameEl);
        card.appendChild(descEl);
        card.appendChild(actions);
        card.appendChild(status);

        missionsGrid.appendChild(card);
      });
    }

    function updateWeeklySummary() {
      const weekKey = weekSelect.value;
      const data = WEEKS[weekKey];
      const total = data.missions.length;
      let done = 0;
      let checked = 0;

      data.missions.forEach((m) => {
        const s = getMissionState(weekKey, m.id);
        if (s.done) done++;
        if (s.checked) checked++;
      });

      totalMissionsEl.textContent = total;
      doneCountEl.textContent = done;
      checkedCountEl.textContent = checked;

      const percent = total ? Math.round((checked / total) * 100) : 0;
      progressBarEl.style.width = percent + "%";
    }

    function getMissionState(weekKey, missionId) {
      if (!state.missions[weekKey]) state.missions[weekKey] = {};
      if (!state.missions[weekKey][missionId]) {
        state.missions[weekKey][missionId] = { done: false, checked: false };
      }
      return state.missions[weekKey][missionId];
    }

    function loadState() {
      try {
        const raw = localStorage.getItem(STORAGE_KEY);
        if (!raw) {
          return {
            childName: "Petr",
            selectedWeek: "week1",
            missions: {},
            notes: {}
          };
        }
        const parsed = JSON.parse(raw);
        if (!parsed.missions) parsed.missions = {};
        if (!parsed.notes) parsed.notes = {};
        if (!parsed.selectedWeek) parsed.selectedWeek = "week1";
        return parsed;
      } catch (e) {
        console.error("Failed to load state", e);
        return {
          childName: "Petr",
          selectedWeek: "week1",
          missions: {},
          notes: {}
        };
      }
    }

    function saveState() {
      localStorage.setItem(STORAGE_KEY, JSON.stringify(state));
    }
  })();
</script>
</body>
</html>
